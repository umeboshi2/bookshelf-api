// Generated by CoffeeScript 1.12.6
'use strict';
var HowhapList;

HowhapList = require('howhap-list');

module.exports = function(req, res, urlPieces, model, config) {
  var list;
  list = new HowhapList(null, {
    availableErrors: config.errors
  });
  model.set(req.body);
  return model.save().then(function(savedModel) {
    res.json(savedModel.toJSON());
  })["catch"](function(err) {
    list.add('UNKNOWN', {
      message: err.toString()
    });
    res.status(400).json(list.toObject());
  }).then(function() {
    return Promise.resolve({
      urlPieces: urlPieces,
      model: model
    });
  });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9zdC5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY3NyYy9wb3N0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQSxJQUFBOztBQUNBLFVBQUEsR0FBYSxPQUFBLENBQVEsYUFBUjs7QUFFYixNQUFNLENBQUMsT0FBUCxHQUFpQixTQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsU0FBWCxFQUFzQixLQUF0QixFQUE2QixNQUE3QjtBQUNmLE1BQUE7RUFBQSxJQUFBLEdBQU8sSUFBSSxVQUFKLENBQWUsSUFBZixFQUFxQjtJQUFBLGVBQUEsRUFBaUIsTUFBTSxDQUFDLE1BQXhCO0dBQXJCO0VBQ1AsS0FBSyxDQUFDLEdBQU4sQ0FBVSxHQUFHLENBQUMsSUFBZDtTQUNBLEtBQUssQ0FBQyxJQUFOLENBQUEsQ0FBWSxDQUFDLElBQWIsQ0FBa0IsU0FBQyxVQUFEO0lBQ2hCLEdBQUcsQ0FBQyxJQUFKLENBQVMsVUFBVSxDQUFDLE1BQVgsQ0FBQSxDQUFUO0VBRGdCLENBQWxCLENBR0MsRUFBQyxLQUFELEVBSEQsQ0FHUSxTQUFDLEdBQUQ7SUFDTixJQUFJLENBQUMsR0FBTCxDQUFTLFNBQVQsRUFBb0I7TUFBQSxPQUFBLEVBQVMsR0FBRyxDQUFDLFFBQUosQ0FBQSxDQUFUO0tBQXBCO0lBQ0EsR0FBRyxDQUFDLE1BQUosQ0FBVyxHQUFYLENBQWUsQ0FBQyxJQUFoQixDQUFxQixJQUFJLENBQUMsUUFBTCxDQUFBLENBQXJCO0VBRk0sQ0FIUixDQU9DLENBQUMsSUFQRixDQU9PLFNBQUE7V0FDTCxPQUFPLENBQUMsT0FBUixDQUNFO01BQUEsU0FBQSxFQUFXLFNBQVg7TUFDQSxLQUFBLEVBQU8sS0FEUDtLQURGO0VBREssQ0FQUDtBQUhlIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5Ib3doYXBMaXN0ID0gcmVxdWlyZSgnaG93aGFwLWxpc3QnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IChyZXEsIHJlcywgdXJsUGllY2VzLCBtb2RlbCwgY29uZmlnKSAtPlxuICBsaXN0ID0gbmV3IEhvd2hhcExpc3QobnVsbCwgYXZhaWxhYmxlRXJyb3JzOiBjb25maWcuZXJyb3JzKVxuICBtb2RlbC5zZXQgcmVxLmJvZHlcbiAgbW9kZWwuc2F2ZSgpLnRoZW4oKHNhdmVkTW9kZWwpIC0+XG4gICAgcmVzLmpzb24gc2F2ZWRNb2RlbC50b0pTT04oKVxuICAgIHJldHVyblxuICApLmNhdGNoKChlcnIpIC0+XG4gICAgbGlzdC5hZGQgJ1VOS05PV04nLCBtZXNzYWdlOiBlcnIudG9TdHJpbmcoKVxuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uIGxpc3QudG9PYmplY3QoKVxuICAgIHJldHVyblxuICApLnRoZW4gLT5cbiAgICBQcm9taXNlLnJlc29sdmVcbiAgICAgIHVybFBpZWNlczogdXJsUGllY2VzXG4gICAgICBtb2RlbDogbW9kZWxcbiJdfQ==
//# sourceURL=/freespace/home/umeboshi/workspace/bookshelf-api/csrc/post.coffee